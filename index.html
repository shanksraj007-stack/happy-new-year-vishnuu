<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Happy New Year Vishnu üíñ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<!-- GOOGLE FONTS -->
<link href="https://fonts.googleapis.com/css2?family=Nothing+You+Could+Do&family=Montserrat:wght@400;600&family=Patrick+Hand&display=swap" rel="stylesheet">

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}

html{ font-size:18px; }

body{
  background:#000;
  color:#fff;
  overflow:hidden;
  font-family:'Montserrat',sans-serif;
  font-size:1.05rem;
}

h1, h2, h3, h4{
  font-family:'Nothing You Could Do', cursive;
  letter-spacing:1.8px;
}

h1{font-size:3.2rem}
h2{font-size:2.6rem}
h3{font-size:2.1rem}
h4{font-size:1.8rem}

p{
  font-size:1.25rem;
  line-height:1.8;
}

.signature-font{
  font-family:'Patrick Hand', cursive;
  font-size:1.5rem;
}

.bg{
  position:fixed;
  inset:0;
  z-index:0;
  background:
    radial-gradient(circle at 20% 30%, rgba(255,0,80,.25), transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(255,0,0,.3), transparent 40%);
  transition:.8s;
}

.page{
  position:absolute;
  inset:0;
  display:none;
  justify-content:center;
  align-items:center;
  z-index:2;
}
.page.active{display:flex}

.card{
  width:90%;
  max-width:620px;
  padding:46px 38px;
  background:rgba(0,0,0,.92);
  border-radius:28px;
  text-align:center;
  position:relative;
  border:2px solid #ff003c;
  box-shadow:0 0 20px #ff003c,inset 0 0 12px rgba(255,0,60,.6);
  transition:.8s;
}

body.gold{background:#050300}
body.gold .bg{opacity:0}
body.gold .card{
  border-color:gold;
  box-shadow:0 0 35px gold,inset 0 0 25px rgba(255,215,0,.6);
}

button{
  margin-top:26px;
  padding:18px 46px;
  border:none;
  border-radius:45px;
  background:linear-gradient(45deg,#ff003c,#ff5fa2);
  color:white;
  font-size:1.3rem;
  cursor:pointer;
  transition:.35s ease;
  position:relative;
  overflow:hidden;
}

button:hover{
  transform:scale(1.1);
  box-shadow: 0 0 20px #ff0000, inset 0 0 10px #000;
  filter: drop-shadow(0 0 10px #ff0000);
  background:linear-gradient(45deg,#ff0000,#cc003c);
  animation: glow 1s infinite alternate;
}

@keyframes glow {
  from { box-shadow: 0 0 20px #ff0000, inset 0 0 10px #000; }
  to { box-shadow: 0 0 40px #ff0000, inset 0 0 20px #000; }
}

.hold-wrap{
  margin:36px auto;
  width:200px;
  height:200px;
  position:relative;
}
svg{
  position:absolute;
  inset:0;
  transform:rotate(-90deg)
}
.track{
  fill:none;
  stroke:rgba(255,255,255,.15);
  stroke-width:7
}
.progress{
  fill:none;
  stroke:white;
  stroke-width:7;
  stroke-dasharray:565;
  stroke-dashoffset:565
}
.heart{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:4.6rem;
  cursor:pointer;
  user-select: none;
  -webkit-user-drag: none;
}
.sparkle{animation:sparkle .6s infinite alternate}
@keyframes sparkle{
  to{transform:scale(1.3); text-shadow:0 0 20px #ff66cc;}
}

.secondary-text{
  position:absolute;
  top:6%;
  width:100%;
  text-align:center;
  opacity:.9;
}

.primary-zone{
  position:relative;
  height:360px;
  margin-top:40px;
}

.gift{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:110px;
  height:110px;
  background:#ff4fa3;
  border-radius:16px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:3.4rem;
  box-shadow:0 0 30px rgba(255,80,160,.9);
  z-index:2;
  cursor:pointer;
  transition:.4s;
}

.card-item{
  position:absolute;
  width:360px;
  height:210px;
  border-radius:30px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-size:1.6rem;
  font-weight:700;
  cursor:grab;
  user-select:none;
  z-index:5;
  border:4px solid white;
  background: linear-gradient(135deg, #ff003c, #ff5fa2);
}
.card-item span{
  font-size:3.6rem;
  margin-bottom:10px
}

.bad{background: linear-gradient(135deg,#1e2a4f,#7aa2ff); color:#fff}
.work{background: linear-gradient(135deg,#3b3b3b,#e0e0e0); color:#fff}
.stress{background: linear-gradient(135deg,#3c1e4f,#e08cff); color:#fff}
.distance{background: linear-gradient(135deg,#0f3d3a,#6fffe9); color:#fff}

.particle{
  position:absolute;
  width:8px;
  height:8px;
  background:gold;
  border-radius:50%;
  animation:burst .9s linear forwards;
}
@keyframes burst{
  to{
    transform:translate(var(--x),var(--y));
    opacity:0
  }
}

.ticket{
  position:fixed;
  inset:0;
  display:none;
  justify-content:center;
  align-items:center;
  z-index:20;
}

.ticket-inner{
  width:95%;
  max-width:760px;
  background:linear-gradient(135deg,#ffd700,#fff1a8);
  color:#4a3300;
  padding:80px 55px;
  border-radius:32px;
  position:relative;
  box-shadow:0 0 65px gold;
  text-align:center;
  transform:rotate(-4deg);
  transition:.5s;
}
.ticket-inner:hover{
  transform:rotate(0deg) scale(1.06);
  box-shadow:0 0 95px gold;
}

.ticket-inner h1{
  font-size:4rem;
  color:gold;
  -webkit-text-stroke:1.5px #000;
  text-shadow:0 0 18px rgba(255,215,0,.95);
}

.ticket-inner p{font-size:1.6rem;margin-top:16px}
.fade{opacity:.65}

.popup-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:50;
}
.popup{
  max-width:800px;
  width:90%;
  min-height:600px;
  background:linear-gradient(135deg,#ff0000,#000);
  color:white;
  padding:60px 50px;
  border-radius:20px;
  text-align:center;
  font-size:2rem;
  box-shadow:0 0 60px #ff0000, inset 0 0 20px #fff;
  opacity:0;
  transform:scale(0.7);
  transition:all .8s ease;
}
.popup.show{
  opacity:1;
  transform:scale(1);
}
.popup button{
  margin-top:25px;
  background:linear-gradient(45deg,#ff003c,#ff5fa2);
  font-size:1.7rem;
  padding:20px 50px;
  border-radius:40px;
}

#finalWishPage .card {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100%;
  padding: 30px 20px;
}

#finalHeart {
  font-size: 5rem;
  margin-bottom: 20px;
  animation: sparkle 1.2s ease-in-out infinite alternate;
}

.page-flip-container {
  position: relative;
  width: 100%;
  max-width: 680px;
  height: 480px;
  margin-top: 25px;
  perspective: 1200px;
}

.page-flip {
  width: 100%;
  height: 100%;
  position: absolute;
  transform-style: preserve-3d;
  transition: transform 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55);
}

.page-front, .page-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: 26px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 30px;
  box-sizing: border-box;
  text-align: center;
}

.page-front {
  background: linear-gradient(135deg, #ff003c, #ff5fa2);
  color: white;
}

#tapTab {
  background: linear-gradient(135deg, #ff6b9d, #ff003c);
  color: white;
  font-family: 'Patrick Hand', cursive;
  font-size: 2.1rem;
  padding: 20px 55px;
  border-radius: 55px;
  cursor: pointer;
  box-shadow: 0 8px 25px rgba(255,0,60,0.8);
  transition: transform 0.4s ease, box-shadow 0.3s ease;
  user-select: none;
  border: 3px solid white;
  max-width: 95%;
  word-break: break-word;
}
#tapTab:hover {
  transform: translateY(-7px);
  box-shadow: 0 12px 30px rgba(255,0,60,0.95);
}

.page-back {
  background: linear-gradient(135deg, #ffd700, #ffaa00);
  color: #4a3300;
  transform: rotateY(180deg);
  font-family: 'Patrick Hand', cursive;
  box-shadow: 0 0 35px gold;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 25px;
}

.wish-content {
  width: 100%;
  max-height: 360px;
  overflow-y: auto;
  padding: 20px;
  font-size: 2rem;
  line-height: 1.6;
  text-align: center;
  scrollbar-width: thin;
  scrollbar-color: #d4af37 #ffeb99;
}
.wish-content::-webkit-scrollbar {
  width: 8px;
}
.wish-content::-webkit-scrollbar-track {
  background: #ffeb99;
  border-radius: 4px;
}
.wish-content::-webkit-scrollbar-thumb {
  background: #d4af37;
  border-radius: 4px;
}
.wish-content::-webkit-scrollbar-thumb:hover {
  background: #b8860b;
}

.page-flipped .page-flip {
  transform: rotateY(180deg);
}

@media (max-width: 600px) {
  .page-flip-container { height: 500px; }
  .wish-content { font-size: 1.75rem; max-height: 380px; }
  #finalHeart { font-size: 4.2rem; }
  h1 { font-size: 2.7rem; }
}
</style>
</head>
<body>
<div class="bg"></div>

<!-- ‚úÖ AUDIO: ONE-TIME START (no stop) -->
<audio id="myAudio" src="heal.mp3" preload="auto" loop></audio>

<!-- PAGE 0 -->
<div class="page active">
  <div class="card">
    <h1>A little something for you before the year begins üíñ</h1>
    <p>Welcome to the edge of 2026... with love ‚ù§Ô∏è</p>

    <div class="hold-wrap">
      <svg viewBox="0 0 200 200">
        <circle class="track" cx="100" cy="100" r="90"/>
        <circle class="progress" cx="100" cy="100" r="90" id="circle"/>
      </svg>
      <div class="heart" id="playButton">üíî</div>
    </div>

    <p>Tap to start music ‚Ä¢ Hold to heal the heart üíñ</p>
    <button id="nextBtn" style="display:none" onclick="next()">Next üíñ</button>
  </div>
</div>

<!-- PAGE 1 -->
<div class="page">
  <div class="secondary-text">
    <h1>Something‚Äôs waiting for you üíñ</h1>
    <p>Move the little distractions aside</p>
  </div>
  <div class="card">
    <div class="primary-zone">
      <div class="gift" id="gift">üéÅ</div>
      <div class="card-item bad" style="top:20px;left:20px"><span>üåßÔ∏è</span>Bad Days</div>
      <div class="card-item work" style="top:40px;left:260px"><span>üíº</span>Work Loads</div>
      <div class="card-item stress" style="top:160px;left:80px"><span>üß†</span>Stress</div>
      <div class="card-item distance" style="top:170px;left:330px"><span>üåç</span>Distance</div>
    </div>
  </div>
</div>

<!-- GOLDEN TICKET -->
<div class="ticket" id="ticket">
  <div class="ticket-inner">
    <h1>GOLDEN TICKET</h1>
    <p>Valid for every day of 2026</p>
    <p>"Unlimited love & smiles"</p>
    <p class="fade">No expiry date</p>
    <button onclick="document.getElementById('ticket').style.display='none'; next()">Claim Ticket üíñ</button>
  </div>
</div>

<!-- PAGE 2: MEMORIES -->
<div class="page" id="memoriesPage">
  <div class="card">
    <h1>Memories üíñ</h1>
    <button id="revealMemoriesBtn">Reveal Memories üíñ</button>
  </div>
</div>

<!-- PAGE 3: FINAL WISH -->
<div class="page" id="finalWishPage">
  <div class="card">
    <div id="finalHeart">üíñ</div>
    <h1>Happy New Year Vishnuuu üíñ</h1>
    <div class="page-flip-container">
      <div class="page-flip" id="flipCard">
        <div class="page-front">
          <div id="tapTab">‚ú® Tap to Reveal Your Wish ‚ú®</div>
        </div>
        <div class="page-back">
          <div class="wish-content">
            May 2026 be filled with laughter,<br>
            dreams that come true,<br>
            and moments that take your breath away.<br><br>
            And through it all ‚Äî<br>
            may you always feel deeply loved.<br><br>
            Happy New Year, Vishnu! üéÜ‚ù§Ô∏è<br>
            ‚Äî With all my heart
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="popup-overlay" id="popupOverlay">
  <div class="popup" id="popupMessage"></div>
</div>

<script>
// ==== AUDIO: START ONCE, NO STOP ====
const audio = document.getElementById('myAudio');
const playButton = document.getElementById('playButton');
let musicStarted = false;

// Tap = start music (once)
playButton.addEventListener('click', function() {
  if (!musicStarted) {
    musicStarted = true;
    audio.volume = 0.4;
    audio.play().catch(e => console.warn("Audio play failed:", e));
    // Change to üíñ to show it's active
    playButton.innerHTML = 'üíñ';
    playButton.classList.add('sparkle');
  }
});

// ==== HEALING ANIMATION (on hold, visual only) ====
const pages = document.querySelectorAll('.page');
let index = 0;
const circle = document.getElementById("circle");
const nextBtn = document.getElementById("nextBtn");
let hold = 0, timer = null, done = false;

const startHold = () => {
  if (done) return;
  timer = setInterval(() => {
    hold++;
    circle.style.strokeDashoffset = 565 - (565 * hold / 100);
    if (hold >= 100) {
      done = true;
      clearInterval(timer);
      nextBtn.style.display = "inline-block";
    }
  }, 25);
};
const stopHold = () => { if (timer) clearInterval(timer); };

// Hold detection (doesn't block tap)
let isHolding = false;
const HOLD_THRESHOLD = 400;

playButton.addEventListener('touchstart', function(e) {
  e.preventDefault();
  if (!musicStarted) {
    musicStarted = true;
    audio.volume = 0.4;
    audio.play().catch(e => console.warn("Play failed:", e));
    playButton.innerHTML = 'üíñ';
    playButton.classList.add('sparkle');
  }
  isHolding = false;
  setTimeout(() => {
    if (!done) {
      isHolding = true;
      startHold();
    }
  }, HOLD_THRESHOLD);
}, { passive: false });

['touchend', 'touchcancel'].forEach(ev => {
  document.addEventListener(ev, () => { if (isHolding) stopHold(); isHolding = false; });
});

// Mouse fallback
playButton.addEventListener('mousedown', () => {
  if (!musicStarted) {
    musicStarted = true;
    audio.volume = 0.4;
    audio.play().catch(e => console.warn("Play failed:", e));
    playButton.innerHTML = 'üíñ';
    playButton.classList.add('sparkle');
  }
  isHolding = false;
  setTimeout(() => { if (!done) { isHolding = true; startHold(); } }, HOLD_THRESHOLD);
});
document.addEventListener('mouseup', () => { if (isHolding) stopHold(); isHolding = false; });

// ==== Navigation ====
function next() {
  pages[index].classList.remove("active");
  index++;
  if (index >= pages.length) index = pages.length - 1;
  pages[index].classList.add("active");
}

// ===== DRAG, GIFT, MEMORIES, FLIP ‚Äî UNCHANGED =====
document.querySelectorAll('.card-item').forEach(card => {
  card.onmousedown = e => {
    let x = e.clientX - card.offsetLeft, y = e.clientY - card.offsetTop;
    card.style.zIndex = 10; card.style.cursor = 'grabbing';
    const move = e => { card.style.left = (e.pageX - x) + 'px'; card.style.top = (e.pageY - y) + 'px'; };
    document.addEventListener('mousemove', move);
    document.onmouseup = () => { document.removeEventListener('mousemove', move); card.style.cursor = 'grab'; };
  };
});

gift.onclick = () => {
  navigator.vibrate?.([120, 60, 120]);
  document.body.classList.add("gold");
  for (let i = 0; i < 60; i++) {
    const p = document.createElement("div");
    p.className = "particle"; p.style.left = "50%"; p.style.top = "50%";
    p.style.setProperty('--x', `${Math.random() * 400 - 200}px`);
    p.style.setProperty('--y', `${Math.random() * 400 - 200}px`);
    gift.appendChild(p);
    setTimeout(() => p.remove(), 900);
  }
  setTimeout(() => ticket.style.display = "flex", 600);
};

revealMemoriesBtn.onclick = () => {
  revealMemoriesBtn.style.display = "none";
  popupOverlay.style.display = "flex";
  popupMessage.innerHTML = '<span class="signature-font" style="font-size:2.5rem;">Athan nee enkuda photo veh eduthukaliyehh üò§ aproom enna memoriesuhh</span>';
  popupMessage.classList.add("show");
  setTimeout(() => {
    popupMessage.innerHTML += '<br><br><button id="secondPopupBtn" class="signature-font" style="font-size:2.2rem;">Something Special Than Photos üíñ</button>';
    secondPopupBtn.onclick = () => {
      popupMessage.innerHTML = '<span class="signature-font" style="font-size:2.5rem;">Ana na unna en heart fullah neraphi vachiruken üíñUn siripuh üòÅ<br>Un kannuhüëÄ<br>Kathi mari rendu puruvohm ‚öî<br> Sirikurpah alga theriyura palluh <br>Aproom unnoda aiyahhhh üò´<br> Ithelam nenachelhhh ulukulah enna moh pannuthu . Nee alagu thandi üíñ Alagiiiiiii....</span>';
      popupMessage.style.background = "linear-gradient(135deg,#ff0000,#000)";
      popupMessage.style.boxShadow = "0 0 60px #ff0000, inset 0 0 20px #fff";
      setTimeout(() => {
        const wishBtn = document.createElement('button');
        wishBtn.className = 'signature-font'; wishBtn.innerText = 'The Wish'; wishBtn.style.fontSize = '2.2rem'; wishBtn.style.marginTop = '30px'; wishBtn.style.padding = '18px 40px';
        wishBtn.onclick = () => { popupOverlay.style.display = 'none'; pages[pages.length - 1].classList.add('active'); };
        popupMessage.appendChild(wishBtn);
      }, 5000);
    };
  }, 2000);
};

tapTab.onclick = () => {
  document.querySelector('.page-flip-container').classList.add('page-flipped');
  tapTab.style.pointerEvents = 'none';
  tapTab.style.opacity = '0.7';
};
</script>
</body>
</html>

