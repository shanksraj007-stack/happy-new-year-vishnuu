<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Happy New Year Vishnu ğŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<link href="https://fonts.googleapis.com/css2?family=Nothing+You+Could+Do&family=Montserrat:wght@400;600&family=Patrick+Hand&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
html{font-size:14px}
@media (min-width:480px){html{font-size:15px}}

body{
  background:#000;
  color:#fff;
  overflow:hidden;
  font-family:'Montserrat',sans-serif;
  font-size:1rem;
  -webkit-tap-highlight-color: transparent;
}

h1,h2,h3,h4{
  font-family:'Nothing You Could Do',cursive;
  letter-spacing:1.2px;
  margin:6px 0;
}
h1{font-size:1.9rem}
h2{font-size:1.7rem}
h3{font-size:1.5rem}
h4{font-size:1.4rem}

p{font-size:1rem;line-height:1.6;margin:8px 0}
.signature-font{font-family:'Patrick Hand',cursive;font-size:1.3rem}

.bg{
  position:fixed;
  inset:0;
  z-index:0;
  background:radial-gradient(circle at 20% 30%,rgba(255,0,80,.2),transparent 40%),radial-gradient(circle at 80% 70%,rgba(255,0,0,.25),transparent 40%);
}

.page{
  position:absolute;
  inset:0;
  display:none;
  justify-content:center;
  align-items:center;
  z-index:2;
  padding:10px;
}
.page.active{display:flex}

.card{
  width:96%;
  max-width:560px;
  padding:24px 20px;
  background:rgba(0,0,0,.92);
  border-radius:20px;
  text-align:center;
  position:relative;
  border:2px solid #ff003c;
  box-shadow:0 0 12px #ff003c,inset 0 0 8px rgba(255,0,60,.5);
}

body.gold{background:#050300}
body.gold .bg{opacity:0}
body.gold .card{
  border-color:gold;
  box-shadow:0 0 24px gold,inset 0 0 18px rgba(255,215,0,.5);
}

button{
  margin-top:16px;
  padding:12px 30px;
  border:none;
  border-radius:40px;
  background:linear-gradient(45deg,#ff003c,#ff5fa2);
  color:white;
  font-size:1.1rem;
  cursor:pointer;
  transition:.3s;
  font-weight:600;
}

.hold-wrap{
  margin:20px auto;
  width:140px;
  height:140px;
  position:relative;
}
svg{
  position:absolute;
  inset:0;
  transform:rotate(-90deg)
}
.track{
  fill:none;
  stroke:rgba(255,255,255,.15);
  stroke-width:5
}
.progress{
  fill:none;
  stroke:white;
  stroke-width:5;
  stroke-dasharray:440;
  stroke-dashoffset:440
}
.heart{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:3.2rem;
  cursor:pointer;
  user-select:none;
}
.sparkle{animation:sparkle .6s infinite alternate}
@keyframes sparkle{to{transform:scale(1.2);text-shadow:0 0 16px #ff66cc;}}

.secondary-text{
  position:absolute;
  top:4%;
  width:100%;
  text-align:center;
  opacity:.9;
  padding:0 12px;
}

.primary-zone{
  position:relative;
  height:250px;
  margin-top:24px;
}

.gift{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  width:80px;
  height:80px;
  background:#ff4fa3;
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:2.4rem;
  box-shadow:0 0 20px rgba(255,80,160,.8);
  z-index:2;
  cursor:pointer;
}

.card-item{
  position:absolute;
  width:250px;
  height:140px;
  border-radius:18px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-size:1.25rem;
  font-weight:700;
  cursor:grab;
  user-select:none;
  z-index:5;
  border:3px solid white;
  background:linear-gradient(135deg,#ff003c,#ff5fa2);
  touch-action: none;
}
.card-item span{
  font-size:2.4rem;
  margin-bottom:6px
}

.bad{background:linear-gradient(135deg,#1e2a4f,#7aa2ff);color:#fff}
.work{background:linear-gradient(135deg,#3b3b3b,#e0e0e0);color:#fff}
.stress{background:linear-gradient(135deg,#3c1e4f,#e08cff);color:#fff}
.distance{background:linear-gradient(135deg,#0f3d3a,#6fffe9);color:#fff}

.particle{
  position:absolute;
  width:6px;
  height:6px;
  background:gold;
  border-radius:50%;
  animation:burst .8s linear forwards;
}
@keyframes burst{to{transform:translate(var(--x),var(--y));opacity:0}}

.ticket{
  position:fixed;
  inset:0;
  display:none;
  justify-content:center;
  align-items:center;
  z-index:20;
  padding:10px;
}
.ticket-inner{
  width:96%;
  max-width:680px;
  background:linear-gradient(135deg,#ffd700,#fff1a8);
  color:#4a3300;
  padding:50px 35px;
  border-radius:24px;
  box-shadow:0 0 50px gold;
  text-align:center;
  transform:rotate(-3deg);
}
.ticket-inner h1{
  font-size:2.8rem;
  color:gold;
  -webkit-text-stroke:1px #000;
  text-shadow:0 0 12px rgba(255,215,0,.85);
}
.ticket-inner p{font-size:1.3rem;margin-top:10px}
.fade{opacity:.65}

.popup-overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.9);
  display:none;
  justify-content:center;
  align-items:center;
  z-index:50;
  padding:12px;
}
.popup{
  width:94%;
  max-width:700px;
  min-height:460px;
  background:linear-gradient(135deg,#ff0000,#000);
  color:white;
  padding:40px 30px;
  border-radius:16px;
  text-align:center;
  font-size:1.6rem;
  box-shadow:0 0 45px #ff0000,inset 0 0 16px #fff;
  opacity:0;
  transform:scale(0.8);
  transition:all .7s ease;
}
.popup.show{
  opacity:1;
  transform:scale(1);
}

#finalWishPage .card{
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  height:100%;
  padding:20px 16px;
}

#finalHeart{
  font-size:3.8rem;
  margin-bottom:14px;
  animation:sparkle 1.2s infinite alternate;
}

.page-flip-container{
  position:relative;
  width:100%;
  max-width:580px;
  height:360px;
  margin-top:18px;
  perspective:1000px;
}
.page-flip{
  width:100%;
  height:100%;
  position:absolute;
  transform-style:preserve-3d;
  transition:transform 1s cubic-bezier(0.68,-0.55,0.27,1.55);
}
.page-front,.page-back{
  position:absolute;
  width:100%;
  height:100%;
  backface-visibility:hidden;
  border-radius:20px;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  padding:20px;
  box-sizing:border-box;
  text-align:center;
}
.page-front{background:linear-gradient(135deg,#ff003c,#ff5fa2);color:white}
.page-back{
  background:linear-gradient(135deg,#ffd700,#ffaa00);
  color:#4a3300;
  transform:rotateY(180deg);
  font-family:'Patrick Hand',cursive;
  box-shadow:0 0 28px gold;
}

#tapTab{
  background:linear-gradient(135deg,#ff6b9d,#ff003c);
  color:white;
  font-family:'Patrick Hand',cursive;
  font-size:1.7rem;
  padding:15px 40px;
  border-radius:50px;
  cursor:pointer;
  box-shadow:0 6px 18px rgba(255,0,60,0.7);
  transition:.3s;
  user-select:none;
  border:2.5px solid white;
  max-width:95%;
  word-break:break-word;
}

.wish-content{
  width:100%;
  max-height:270px;
  overflow-y:auto;
  padding:16px;
  font-size:1.6rem;
  line-height:1.5;
  text-align:center;
  scrollbar-width:thin;
  scrollbar-color:#444 #222;
}
.wish-content::-webkit-scrollbar{width:5px}
.wish-content::-webkit-scrollbar-track{background:#222;border-radius:3px}
.wish-content::-webkit-scrollbar-thumb{background:#444;border-radius:3px}

.page-flipped .page-flip{
  transform:rotateY(180deg);
}
</style>
</head>
<body>
<div class="bg"></div>

<!-- âœ… ONLY AUDIO: MP3 FILE -->
<audio id="myAudio" src="heal.mp3" preload="auto" loop playsinline></audio>

<!-- PAGE 0 -->
<div class="page active">
  <div class="card">
    <h1>A little something for you before 2026 ğŸ’–</h1>
    <p>Welcome to the edge of a magical new year... with love â¤ï¸</p>
    <div class="hold-wrap">
      <svg viewBox="0 0 200 200">
        <circle class="track" cx="100" cy="100" r="70"/>
        <circle class="progress" cx="100" cy="100" r="70" id="circle"/>
      </svg>
      <div class="heart" id="playButton">ğŸ’”</div>
    </div>
    <p>Tap the heart to start music ğŸ’–</p>
    <button id="nextBtn" style="display:none" onclick="next()">Next ğŸ’–</button>
  </div>
</div>

<!-- PAGE 1 -->
<div class="page">
  <div class="secondary-text">
    <h1>Somethingâ€™s waiting for you ğŸ’–</h1>
    <p>Move the little distractions aside</p>
  </div>
  <div class="card">
    <div class="primary-zone">
      <div class="gift" id="gift">ğŸ</div>
      <div class="card-item bad" style="top:10px;left:10px"><span>ğŸŒ§ï¸</span>Bad Days</div>
      <div class="card-item work" style="top:30px;left:220px"><span>ğŸ’¼</span>Work Loads</div>
      <div class="card-item stress" style="top:130px;left:50px"><span>ğŸ§ </span>Stress</div>
      <div class="card-item distance" style="top:140px;left:280px"><span>ğŸŒ</span>Distance</div>
    </div>
  </div>
</div>

<!-- TICKET -->
<div class="ticket" id="ticket">
  <div class="ticket-inner">
    <h1>GOLDEN TICKET</h1>
    <p>Valid for every day of 2026</p>
    <p>"Unlimited love & smiles"</p>
    <p class="fade">No expiry date</p>
    <button onclick="document.getElementById('ticket').style.display='none'; next()">Claim Ticket ğŸ’–</button>
  </div>
</div>

<!-- PAGE 2 -->
<div class="page" id="memoriesPage">
  <div class="card">
    <h1>Memories ğŸ’–</h1>
    <button id="revealMemoriesBtn">Reveal Memories ğŸ’–</button>
  </div>
</div>

<!-- PAGE 3 -->
<div class="page" id="finalWishPage">
  <div class="card">
    <div id="finalHeart">ğŸ’–</div>
    <h1>Happy New Year Vishnuuu ğŸ’–</h1>
    <div class="page-flip-container">
      <div class="page-flip" id="flipCard">
        <div class="page-front">
          <div id="tapTab">âœ¨ Tap to Reveal Your Wish âœ¨</div>
        </div>
        <div class="page-back">
          <div class="wish-content">
            May 2026 be filled with laughter,<br>
            dreams that come true,<br>
            and moments that take your breath away.<br><br>
            And through it all â€”<br>
            may you always feel deeply loved.<br><br>
            Happy New Year, Vishnu! ğŸ†â¤ï¸<br>
            â€” With all my heart
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="popup-overlay" id="popupOverlay">
  <div class="popup" id="popupMessage"></div>
</div>

<script>
// ==== PLAY MUSIC ON HEART TAP (ONCE) ====
const audio = document.getElementById('myAudio');
const playButton = document.getElementById('playButton');
let musicStarted = false;

function startMusic() {
  if (!musicStarted) {
    musicStarted = true;
    audio.volume = 0.4;
    // This will work on mobile because it's inside a direct user gesture
    audio.play().catch(e => console.warn("Audio play failed:", e));
    playButton.innerHTML = 'ğŸ’–';
    playButton.classList.add('sparkle');
    // Show next button immediately
    document.getElementById('nextBtn').style.display = 'inline-block';
  }
}

// âœ… Unified tap handler for all devices
playButton.addEventListener('click', startMusic);
playButton.addEventListener('touchstart', function(e) {
  e.preventDefault();
  startMusic();
}, { passive: false });

// ==== DRAG CARDS â€” FULL TOUCH SUPPORT ====
document.querySelectorAll('.card-item').forEach(card => {
  let isDragging = false;
  let startX, startY, initialX, initialY;

  const startDrag = (clientX, clientY) => {
    isDragging = true;
    card.style.zIndex = 10;
    card.style.cursor = 'grabbing';
    initialX = parseFloat(card.style.left) || card.offsetLeft;
    initialY = parseFloat(card.style.top) || card.offsetTop;
    startX = clientX;
    startY = clientY;
    card.style.transition = 'none';
  };

  const moveDrag = (clientX, clientY) => {
    if (!isDragging) return;
    card.style.left = (initialX + clientX - startX) + 'px';
    card.style.top = (initialY + clientY - startY) + 'px';
  };

  const stopDrag = () => {
    if (isDragging) {
      isDragging = false;
      card.style.cursor = 'grab';
      card.style.transition = '';
    }
  };

  // TOUCH EVENTS FOR MOBILE
  card.addEventListener('touchstart', (e) => {
    e.preventDefault();
    const touch = e.touches[0];
    startDrag(touch.clientX, touch.clientY);
  }, { passive: false });

  document.addEventListener('touchmove', (e) => {
    if (isDragging && e.touches.length > 0) {
      const touch = e.touches[0];
      moveDrag(touch.clientX, touch.clientY);
    }
  }, { passive: false });

  document.addEventListener('touchend', stopDrag);
  document.addEventListener('touchcancel', stopDrag);

  // Mouse support (for desktop testing)
  card.addEventListener('mousedown', (e) => startDrag(e.clientX, e.clientY));
  document.addEventListener('mousemove', (e) => moveDrag(e.clientX, e.clientY));
  document.addEventListener('mouseup', stopDrag);
});

// ==== NAVIGATION ====
const pages = document.querySelectorAll('.page');
let index = 0;

function next() {
  pages[index].classList.remove('active');
  index = Math.min(index + 1, pages.length - 1);
  pages[index].classList.add('active');
}

// ==== OTHER INTERACTIONS (UNCHANGED) ====
gift.addEventListener('click', () => {
  if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
  document.body.classList.add('gold');
  for (let i = 0; i < 50; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.left = '50%';
    p.style.top = '50%';
    p.style.setProperty('--x', `${Math.random() * 300 - 150}px`);
    p.style.setProperty('--y', `${Math.random() * 300 - 150}px`);
    gift.appendChild(p);
    setTimeout(() => p.remove(), 800);
  }
  setTimeout(() => ticket.style.display = 'flex', 500);
});

revealMemoriesBtn.addEventListener('click', () => {
  revealMemoriesBtn.style.display = 'none';
  popupOverlay.style.display = 'flex';
  popupMessage.innerHTML = '<span class="signature-font">Athan nee enkuda photo veh eduthukaliyehh ğŸ˜¤ aproom enna memoriesuhh</span>';
  popupMessage.classList.add('show');
  setTimeout(() => {
    popupMessage.innerHTML += '<br><br><button id="secondPopupBtn" class="signature-font">Something Special Than Photos ğŸ’–</button>';
    secondPopupBtn.onclick = () => {
      popupMessage.innerHTML = '<span class="signature-font">Ana na unna en heart fullah neraphi vachiruken ğŸ’–Un siripuh ğŸ˜<br>Un kannuhğŸ‘€<br>Kathi mari rendu puruvohm âš”<br> Sirikurpah alga theriyura palluh <br>Aproom unnoda aiyahhhh ğŸ˜«<br> Ithelam nenachelhhh ulukulah enna moh pannuthu . Nee alagu thandi ğŸ’– Alagiiiiiii....</span>';
      popupMessage.style.background = "linear-gradient(135deg,#ff0000,#000)";
      setTimeout(() => {
        const btn = document.createElement('button');
        btn.className = 'signature-font';
        btn.innerText = 'The Wish';
        btn.style.fontSize = '2.1rem';
        btn.style.marginTop = '28px';
        btn.style.padding = '16px 38px';
        btn.onclick = () => {
          popupOverlay.style.display = 'none';
          pages[pages.length - 1].classList.add('active');
        };
        popupMessage.appendChild(btn);
      }, 5000);
    };
  }, 2000);
});

tapTab.addEventListener('click', () => {
  document.querySelector('.page-flip-container').classList.add('page-flipped');
  tapTab.style.pointerEvents = 'none';
  tapTab.style.opacity = '0.7';
});
</script>
</body>
</html>
